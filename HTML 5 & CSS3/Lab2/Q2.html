<html>
<head>
    <title>Google Map with Country Selector</title>
    <style>
        #map {
            height: 80%;
            width: 100%;
        }

        html, body {
            height: 100%;
            margin: 0;
            padding: 0;
        }

        select {
            margin: 10px;
            padding: 5px;
            font-size: 16px;
        }
    </style>
</head>

<body>
    <h2>Select a country:</h2>
    <select id="country">
        <option value="">--Choose a country--</option>
        <option value="USA">United States</option>
        <option value="Egypt">Egypt</option>
        <option value="Japan">Japan</option>
    </select>

    <div id="map"></div>

    <!-- Google Maps API -->
    <script>(g => { var h, a, k, p = "The Google Maps JavaScript API", c = "google", l = "importLibrary", q = "__ib__", m = document, b = window; b = b[c] || (b[c] = {}); var d = b.maps || (b.maps = {}), r = new Set, e = new URLSearchParams, u = () => h || (h = new Promise(async (f, n) => { await (a = m.createElement("script")); e.set("libraries", [...r] + ""); for (k in g) e.set(k.replace(/[A-Z]/g, t => "_" + t[0].toLowerCase()), g[k]); e.set("callback", c + ".maps." + q); a.src = `https://maps.${c}apis.com/maps/api/js?` + e; d[q] = f; a.onerror = () => h = n(Error(p + " could not load.")); a.nonce = m.querySelector("script[nonce]")?.nonce || ""; m.head.append(a) })); d[l] ? console.warn(p + " only loads once. Ignoring:", g) : d[l] = (f, ...n) => r.add(f) && u().then(() => d[l](f, ...n)) })({ key: "AIzaSyA6myHzS10YXdcazAFalmXvDkrYCp5cLc8", v: "weekly" });</script>

    <script>
        let map;
        let marker;

        const countryCoords = {
            "USA": { lat: 37.0902, lng: -95.7129 },
            "Egypt": { lat: 26.8206, lng: 30.8025 },
            "Japan": { lat: 36.2048, lng: 138.2529 }
        };

        async function initMap(lat, lng) {
            const { Map } = (await google.maps.importLibrary('maps'));
            const myLatLng = { lat: lat, lng: lng };

            map = new google.maps.Map(document.getElementById("map"), {
                zoom: 5,
                center: myLatLng
            });

            marker = new google.maps.Marker({
                position: myLatLng,
                map: map,
                title: "You are here!"
            });
        }

        navigator.geolocation.getCurrentPosition(
            (pos) => {
                initMap(pos.coords.latitude, pos.coords.longitude);
            },
            (err) => {
                alert("Could not get your location. Showing default location.");
                initMap(26.8206, 30.8025); 
            }
        );

        document.getElementById("country").addEventListener("change", function() {
            const country = this.value;
            if (countryCoords[country]) {
                const coords = countryCoords[country];

                map.setCenter(coords);
                map.setZoom(5);

                if (marker) marker.setMap(null);

                marker = new google.maps.Marker({
                    position: coords,
                    map: map,
                    title: country
                });
            }
        });
    </script>
</body>
</html>